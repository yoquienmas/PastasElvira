<Window x:Class="CapaPresentacion.FormCostoFijo"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestión de Costos Fijos de Producción" Height="600" Width="900"
        Background="#fff8e1" FontFamily="Georgia"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock Text="💰 GESTIÓN DE COSTOS FIJOS DE PRODUCCIÓN" FontSize="24" FontWeight="Bold" Foreground="#a36b00"
                   HorizontalAlignment="Center" Margin="0,0,0,20"/>

        <!-- Formulario de Costo Fijo -->
        <Border Grid.Row="1" Background="White" CornerRadius="12" Padding="20"
                BorderBrush="#e2a42d" BorderThickness="2" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Concepto -->
                <TextBlock Text="Concepto:" Grid.Row="0" Grid.Column="0" Margin="0,0,10,10" Foreground="#5c3a00"/>
                <TextBox x:Name="txtConcepto" Grid.Row="0" Grid.Column="1" Margin="0,0,0,10" Height="30" Width="300"/>

                <!-- Monto -->
                <TextBlock Text="Monto ($):" Grid.Row="1" Grid.Column="0" Margin="0,0,10,10" Foreground="#5c3a00"/>
                <TextBox x:Name="txtMonto" Grid.Row="1" Grid.Column="1" Margin="0,0,0,10" Height="30" Width="150"/>

                <!-- Activo -->
                <CheckBox x:Name="chkActivo" Grid.Row="2" Grid.Column="1" Content="Costo activo" Margin="0,10,0,0"
                          Foreground="#5c3a00" FontWeight="Bold"/>

                <!-- Botones -->
                <StackPanel Grid.Row="0" Grid.Column="2" Grid.RowSpan="3" Orientation="Vertical" Margin="20,0,0,0">
                    <Button x:Name="btnNuevo" Content="Nuevo" Width="100" Height="35" Margin="0,0,0,10"
                            Background="#4CAF50" Foreground="White" FontWeight="Bold"
                            Click="btnNuevo_Click"/>
                    <Button x:Name="btnGuardar" Content="Guardar" Width="100" Height="35" Margin="0,0,0,10"
                            Background="#2196F3" Foreground="White" FontWeight="Bold"
                            Click="btnGuardar_Click"/>
                    <Button x:Name="btnEliminar" Content="Eliminar" Width="100" Height="35"
                            Background="#ff6b6b" Foreground="White" FontWeight="Bold"
                            Click="btnEliminar_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Información de costos -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,20">
            <Border Background="#e8f5e8" CornerRadius="8" Padding="15" Margin="0,0,10,0">
                <TextBlock x:Name="txtTotalCostos" FontSize="14" FontWeight="Bold" Foreground="#2e7d32"/>
            </Border>
            <Border Background="#fff3e0" CornerRadius="8" Padding="15">
                <TextBlock x:Name="txtCostosActivos" FontSize="14" FontWeight="Bold" Foreground="#f57c00"/>
            </Border>
        </StackPanel>

        <!-- Lista de Costos Fijos -->
        <DataGrid x:Name="dgvCostosFijos" Grid.Row="2" AutoGenerateColumns="False" IsReadOnly="True"
                  SelectionMode="Single" SelectionChanged="dgvCostosFijos_SelectionChanged"
                  Background="White" BorderBrush="#e2a42d" BorderThickness="1">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding IdCosto}" Width="50"/>
                <DataGridTextColumn Header="Concepto" Binding="{Binding Concepto}" Width="*"/>
                <DataGridTextColumn Header="Monto" Binding="{Binding Monto, StringFormat=C}" Width="100"/>
                <DataGridCheckBoxColumn Header="Activo" Binding="{Binding Activo}" Width="60"/>
                <DataGridTemplateColumn Header="Acciones" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Toggle Estado" Click="BtnToggleEstado_Click" 
                                    Background="#FF9800" Foreground="White" Padding="5" FontSize="10"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Impacto en productos -->
        <Border Grid.Row="3" Background="#f5f5f5" CornerRadius="8" Padding="15" Margin="0,10,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button x:Name="btnRecalcularCostos" Content="🔄 Recalcular Todos los Precios" Width="250" Height="40"
                        Background="#9C27B0" Foreground="White" FontWeight="Bold" FontSize="14"
                        Click="btnRecalcularCostos_Click" ToolTip="Recalcula los precios de todos los productos basado en los costos actuales"/>
                <TextBlock x:Name="txtImpactoInfo" Margin="20,0,0,0" TextWrapping="Wrap" Width="300"
                          Foreground="#5c3a00" FontStyle="Italic"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>